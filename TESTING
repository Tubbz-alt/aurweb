Setup Testing Environment
=========================

Note that this setup is only to test the web interface. If you need to have a
full aurweb instance with cgit, ssh interface, etc, follow the directions in
INSTALL.

1) Clone the aurweb project:

    $ git clone git://git.archlinux.org/aurweb.git

2) Install the necessary packages:

    # pacman -S --needed php php-sqlite sqlite words fortune-mod \
                         python python-sqlalchemy python-alembic \
                         python-fastapi uvicorn nginx

   Ensure to enable the pdo_sqlite extension in php.ini.

3) Copy conf/config.dev to conf/config and replace YOUR_AUR_ROOT by the absolute
   path to the root of your aurweb clone. sed can do both tasks for you:

    $ sed -e "s;YOUR_AUR_ROOT;$PWD;g" conf/config.dev > conf/config

   Note that when the upstream config.dev is updated, you should compare it to
   your conf/config, or regenerate your configuration with the command above.

4) Prepare the testing database:

    $ cd /path/to/aurweb/
    $ python -m aurweb.initdb

    $ cd /path/to/aurweb/schema
    $ ./gendummydata.py out.sql
    $ sqlite3 path/to/aurweb.sqlite3 < out.sql

5) Run the test server:

   $ AUR_CONFIG='/path/to/aurweb/conf/config' python -m aurweb.spawn
